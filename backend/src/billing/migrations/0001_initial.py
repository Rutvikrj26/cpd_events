# Generated by Django 6.0 on 2026-01-16 21:53

import uuid

from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = []

    operations = [
        migrations.CreateModel(
            name='DisputeRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('stripe_dispute_id', models.CharField(db_index=True, max_length=255, unique=True)),
                ('stripe_charge_id', models.CharField(blank=True, db_index=True, max_length=255)),
                ('stripe_payment_intent_id', models.CharField(blank=True, db_index=True, max_length=255)),
                ('amount_cents', models.PositiveIntegerField(default=0)),
                ('currency', models.CharField(default='usd', max_length=3)),
                ('reason', models.CharField(blank=True, max_length=100)),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('needs_response', 'Needs Response'),
                            ('warning_needs_response', 'Warning Needs Response'),
                            ('under_review', 'Under Review'),
                            ('won', 'Won'),
                            ('lost', 'Lost'),
                        ],
                        default='needs_response',
                        max_length=50,
                    ),
                ),
                ('evidence_due_by', models.DateTimeField(blank=True, null=True)),
                ('closed_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Dispute Record',
                'verbose_name_plural': 'Dispute Records',
                'db_table': 'dispute_records',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Invoice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('stripe_invoice_id', models.CharField(db_index=True, max_length=255, unique=True)),
                ('amount_cents', models.PositiveIntegerField()),
                ('currency', models.CharField(default='usd', max_length=3)),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('draft', 'Draft'),
                            ('open', 'Open'),
                            ('paid', 'Paid'),
                            ('void', 'Void'),
                            ('uncollectible', 'Uncollectible'),
                        ],
                        default='draft',
                        max_length=20,
                    ),
                ),
                ('invoice_pdf_url', models.URLField(blank=True, max_length=500)),
                ('hosted_invoice_url', models.URLField(blank=True, max_length=500)),
                ('period_start', models.DateTimeField(blank=True, null=True)),
                ('period_end', models.DateTimeField(blank=True, null=True)),
                ('paid_at', models.DateTimeField(blank=True, null=True)),
                ('due_date', models.DateField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Invoice',
                'verbose_name_plural': 'Invoices',
                'db_table': 'invoices',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PaymentMethod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('stripe_payment_method_id', models.CharField(db_index=True, max_length=255, unique=True)),
                ('card_brand', models.CharField(blank=True, max_length=50)),
                ('card_last4', models.CharField(blank=True, max_length=4)),
                ('card_exp_month', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('card_exp_year', models.PositiveSmallIntegerField(blank=True, null=True)),
                ('is_default', models.BooleanField(default=False)),
                ('billing_name', models.CharField(blank=True, max_length=255)),
                ('billing_email', models.EmailField(blank=True, max_length=254)),
            ],
            options={
                'verbose_name': 'Payment Method',
                'verbose_name_plural': 'Payment Methods',
                'db_table': 'payment_methods',
                'ordering': ['-is_default', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='PayoutRequest',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('stripe_connect_account_id', models.CharField(db_index=True, max_length=255)),
                ('stripe_payout_id', models.CharField(blank=True, db_index=True, max_length=255, null=True, unique=True)),
                ('amount_cents', models.PositiveIntegerField(help_text='Amount in cents')),
                ('currency', models.CharField(default='usd', max_length=3)),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('pending', 'Pending'),
                            ('in_transit', 'In Transit'),
                            ('paid', 'Paid'),
                            ('failed', 'Failed'),
                            ('canceled', 'Canceled'),
                        ],
                        default='pending',
                        max_length=20,
                    ),
                ),
                ('arrival_date', models.DateField(blank=True, help_text='Expected arrival date', null=True)),
                ('destination_bank_last4', models.CharField(blank=True, max_length=4)),
                ('error_message', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Payout Request',
                'verbose_name_plural': 'Payout Requests',
                'db_table': 'payout_requests',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='RefundRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('stripe_refund_id', models.CharField(db_index=True, max_length=255, unique=True)),
                ('stripe_payment_intent_id', models.CharField(db_index=True, max_length=255)),
                ('amount_cents', models.PositiveIntegerField(help_text='Amount refunded in cents')),
                ('currency', models.CharField(default='usd', max_length=3)),
                (
                    'platform_fee_reversed_cents',
                    models.IntegerField(default=0, help_text='Amount of platform fee returned (if any)'),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('pending', 'Pending'),
                            ('succeeded', 'Succeeded'),
                            ('failed', 'Failed'),
                            ('canceled', 'Canceled'),
                        ],
                        default='pending',
                        max_length=20,
                    ),
                ),
                (
                    'reason',
                    models.CharField(
                        choices=[
                            ('duplicate', 'Duplicate'),
                            ('fraudulent', 'Fraudulent'),
                            ('requested_by_customer', 'Requested by Customer'),
                            ('expired_uncaptured', 'Expired Uncaptured Charge'),
                            ('other', 'Other'),
                        ],
                        default='requested_by_customer',
                        max_length=50,
                    ),
                ),
                ('description', models.TextField(blank=True, help_text='Internal notes or description')),
                ('error_message', models.TextField(blank=True)),
            ],
            options={
                'verbose_name': 'Refund Record',
                'verbose_name_plural': 'Refund Records',
                'db_table': 'refund_records',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='StripePrice',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('amount_cents', models.PositiveIntegerField(help_text='Price in cents (e.g., 9900 = $99.00)')),
                ('currency', models.CharField(default='usd', max_length=3)),
                (
                    'billing_interval',
                    models.CharField(choices=[('month', 'Monthly'), ('year', 'Annual')], default='month', max_length=10),
                ),
                (
                    'stripe_price_id',
                    models.CharField(
                        blank=True, help_text='Stripe price ID (price_...)', max_length=255, null=True, unique=True
                    ),
                ),
                ('is_active', models.BooleanField(default=True, help_text='Whether price is available for new subscriptions')),
            ],
            options={
                'verbose_name': 'Stripe Price',
                'verbose_name_plural': 'Stripe Prices',
                'db_table': 'stripe_prices',
                'ordering': ['product', 'billing_interval'],
            },
        ),
        migrations.CreateModel(
            name='StripeProduct',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('name', models.CharField(help_text='Product name (shown to customers)', max_length=255)),
                ('description', models.TextField(blank=True, help_text='Product description')),
                (
                    'stripe_product_id',
                    models.CharField(
                        blank=True, help_text='Stripe product ID (prod_...)', max_length=255, null=True, unique=True
                    ),
                ),
                ('is_active', models.BooleanField(default=True, help_text='Whether product is active')),
                (
                    'plan',
                    models.CharField(
                        choices=[
                            ('attendee', 'Attendee'),
                            ('organizer', 'Organizer'),
                            ('lms', 'LMS'),
                            ('organization', 'Organization'),
                        ],
                        help_text='Which subscription plan this product represents',
                        max_length=50,
                        unique=True,
                    ),
                ),
                ('trial_period_days', models.PositiveIntegerField(default=30, help_text='Trial period in days')),
                (
                    'grace_period_days',
                    models.PositiveIntegerField(default=14, help_text='Grace period in days (after trial/subscription ends)'),
                ),
                (
                    'show_contact_sales',
                    models.BooleanField(
                        default=False, help_text="If true, hides pricing and shows 'Contact Sales' button instead"
                    ),
                ),
                (
                    'events_per_month',
                    models.PositiveIntegerField(blank=True, help_text='Max events per month (null = unlimited)', null=True),
                ),
                (
                    'certificates_per_month',
                    models.PositiveIntegerField(
                        blank=True, help_text='Max certificates per month (null = unlimited)', null=True
                    ),
                ),
                (
                    'courses_per_month',
                    models.PositiveIntegerField(blank=True, help_text='Max courses per month (null = unlimited)', null=True),
                ),
                (
                    'max_attendees_per_event',
                    models.PositiveIntegerField(blank=True, help_text='Max attendees per event (null = unlimited)', null=True),
                ),
                (
                    'included_seats',
                    models.PositiveIntegerField(default=0, help_text='Number of included seats (for organization plans)'),
                ),
                ('seat_price_cents', models.PositiveIntegerField(default=0, help_text='Price per additional seat in cents')),
            ],
            options={
                'verbose_name': 'Stripe Product',
                'verbose_name_plural': 'Stripe Products',
                'db_table': 'stripe_products',
                'ordering': ['plan'],
            },
        ),
        migrations.CreateModel(
            name='Subscription',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                (
                    'plan',
                    models.CharField(
                        choices=[
                            ('attendee', 'Attendee'),
                            ('organizer', 'Organizer'),
                            ('lms', 'LMS'),
                            ('organization', 'Organization'),
                        ],
                        default='attendee',
                        max_length=20,
                    ),
                ),
                (
                    'status',
                    models.CharField(
                        choices=[
                            ('trialing', 'Trialing'),
                            ('active', 'Active'),
                            ('past_due', 'Past Due'),
                            ('canceled', 'Canceled'),
                            ('unpaid', 'Unpaid'),
                            ('incomplete', 'Incomplete'),
                            ('paused', 'Paused'),
                        ],
                        default='active',
                        max_length=20,
                    ),
                ),
                (
                    'billing_interval',
                    models.CharField(choices=[('month', 'Monthly'), ('year', 'Annual')], default='month', max_length=10),
                ),
                (
                    'pending_plan',
                    models.CharField(
                        blank=True,
                        choices=[
                            ('attendee', 'Attendee'),
                            ('organizer', 'Organizer'),
                            ('lms', 'LMS'),
                            ('organization', 'Organization'),
                        ],
                        help_text='Scheduled plan change at period end, if any',
                        max_length=20,
                        null=True,
                    ),
                ),
                (
                    'pending_billing_interval',
                    models.CharField(
                        blank=True,
                        choices=[('month', 'Monthly'), ('year', 'Annual')],
                        help_text='Scheduled billing interval change at period end, if any',
                        max_length=10,
                        null=True,
                    ),
                ),
                (
                    'pending_change_at',
                    models.DateTimeField(blank=True, help_text='When a pending plan change should take effect', null=True),
                ),
                ('stripe_subscription_id', models.CharField(blank=True, db_index=True, max_length=255, null=True, unique=True)),
                ('stripe_customer_id', models.CharField(blank=True, db_index=True, max_length=255, null=True)),
                ('current_period_start', models.DateTimeField(blank=True, null=True)),
                ('current_period_end', models.DateTimeField(blank=True, null=True)),
                ('trial_ends_at', models.DateTimeField(blank=True, null=True)),
                ('cancel_at_period_end', models.BooleanField(default=False)),
                ('canceled_at', models.DateTimeField(blank=True, null=True)),
                ('cancellation_reason', models.TextField(blank=True)),
                ('events_created_this_period', models.PositiveIntegerField(default=0)),
                ('courses_created_this_period', models.PositiveIntegerField(default=0)),
                ('certificates_issued_this_period', models.PositiveIntegerField(default=0)),
                ('last_usage_reset_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Subscription',
                'verbose_name_plural': 'Subscriptions',
                'db_table': 'subscriptions',
            },
        ),
        migrations.CreateModel(
            name='TransferRecord',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, help_text='When this record was created')),
                ('updated_at', models.DateTimeField(auto_now=True, help_text='When this record was last modified')),
                (
                    'uuid',
                    models.UUIDField(
                        db_index=True,
                        default=uuid.uuid4,
                        editable=False,
                        help_text='Public identifier for external use',
                        unique=True,
                    ),
                ),
                ('stripe_transfer_id', models.CharField(blank=True, max_length=255, null=True, unique=True)),
                ('stripe_payment_intent_id', models.CharField(blank=True, max_length=255)),
                ('amount_cents', models.PositiveIntegerField()),
                ('currency', models.CharField(default='usd', max_length=3)),
                ('description', models.CharField(blank=True, max_length=255)),
                ('reversed', models.BooleanField(default=False, help_text='If transfer was reversed (e.g. refund)')),
                ('reversed_at', models.DateTimeField(blank=True, null=True)),
            ],
            options={
                'verbose_name': 'Transfer Record',
                'verbose_name_plural': 'Transfer Records',
                'db_table': 'transfer_records',
                'ordering': ['-created_at'],
            },
        ),
    ]
