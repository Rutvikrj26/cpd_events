import React from "react";
import { Link } from "react-router-dom";
import { Check, ArrowRight, Zap, Building2, Users, User, Mail } from "lucide-react";
import { Button } from "@/components/ui/button";
import {
    Accordion,
    AccordionContent,
    AccordionItem,
    AccordionTrigger,
} from "@/components/ui/accordion";
import { Card, CardContent, CardDescription, CardFooter, CardHeader, CardTitle } from "@/components/ui/card";
import { Badge } from "@/components/ui/badge";

export function PricingPage() {
    const plans = [
        {
            name: "Attendee",
            icon: User,
            description: "For event participants who want to track their learning.",
            price: 0,
            period: "Free forever",
            features: [
                "Browse & register for events",
                "Track attendance history",
                "Download earned certificates",
                "Manage your profile",
                "Email notifications",
            ],
            cta: "Get Started",
            ctaLink: "/signup",
            variant: "outline" as const,
        },
        {
            name: "Professional",
            icon: Users,
            description: "Perfect for trainers, consultants, and solo professionals.",
            popular: true,
            price: 49,
            period: "/month",
            annualPrice: 41,
            features: [
                "30 events per month",
                "500 attendees per event",
                "500 certificates/month",
                "Zoom integration",
                "Advanced analytics",
                "Custom certificate templates",
                "Priority email support",
                "90-day free trial",
            ],
            cta: "Start Free Trial",
            ctaLink: "/signup?role=organizer&plan=professional",
            variant: "default" as const,
        },
        {
            name: "Organization",
            icon: Building2,
            description: "For teams and organizations running large-scale events.",
            price: 199,
            period: "/month",
            annualPrice: 166,
            features: [
                "Unlimited events",
                "2,000 attendees per event",
                "Unlimited certificates",
                "Multi-user team access",
                "Advanced analytics & reporting",
                "White-label options",
                "API access",
                "Priority support",
                "90-day free trial",
                "Team collaboration",
                "Shared templates",
                "Dedicated account manager",
            ],
            cta: "Start Free Trial",
            ctaLink: "/signup?role=organizer&plan=organization",
            variant: "secondary" as const,
        },
    ];

    const faqs = [
        {
            question: "Can I switch plans anytime?",
            answer: "Yes! You can upgrade or downgrade your plan at any time. When upgrading, you'll be charged the prorated difference. When downgrading, the change takes effect at the end of your billing period.",
        },
        {
            question: "What payment methods do you accept?",
            answer: "We accept all major credit cards (Visa, Mastercard, American Express) through our secure payment partner, Stripe. All payment data is handled by Stripe - we never store your card details.",
        },
        {
            question: "Is there a free trial?",
            answer: "The Attendee plan is completely free forever. All paid plans (Professional and Organization) include a 90-day free trial with full access to all features - no credit card required to start!",
        },
        {
            question: "What happens to my data if I downgrade?",
            answer: "Your data is always safe. If you downgrade, you'll retain access to all your existing events and certificates. You just won't be able to create new events beyond the plan limits.",
        },
        {
            question: "Do you offer discounts for nonprofits or educational institutions?",
            answer: "Yes! We offer special pricing for verified nonprofits and educational institutions. Contact our sales team to learn more about our discounted plans.",
        },
        {
            question: "Can I get a custom plan for my organization?",
            answer: "Absolutely. Our Organization plan is fully customizable. Contact our sales team to discuss your specific requirements and we'll create a tailored solution.",
        },
    ];

    return (
        <div className="flex flex-col">
            {/* Hero Section */}
            <section className="py-16 lg:py-24 bg-background relative overflow-hidden">
                <div className="container mx-auto px-4">
                    <div className="text-center max-w-3xl mx-auto">
                        <Badge className="mb-4 bg-primary/10 text-primary hover:bg-primary/20">
                            Simple, transparent pricing
                        </Badge>
                        <h1 className="text-4xl lg:text-5xl font-bold text-foreground mb-6">
                            Choose the right plan for you
                        </h1>
                        <p className="text-xl text-muted-foreground">
                            Whether you're attending events or organizing them, we have a plan that fits your needs.
                        </p>
                    </div>
                </div>
            </section>

            {/* Pricing Cards */}
            <section className="py-12 bg-muted/30">
                <div className="container mx-auto px-4">
                    <div className="grid grid-cols-1 md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                        {plans.map((plan) => {
                            const PlanIcon = plan.icon;
                            return (
                                <Card
                                    key={plan.name}
                                    className={`relative flex flex-col ${plan.popular ? "border-primary shadow-lg ring-1 ring-primary/20" : ""
                                        }`}
                                >
                                    {plan.popular && (
                                        <div className="absolute -top-3 left-1/2 -translate-x-1/2">
                                            <Badge className="bg-primary text-primary-foreground">
                                                <Zap className="h-3 w-3 mr-1" />
                                                Most Popular
                                            </Badge>
                                        </div>
                                    )}
                                    <CardHeader className="pt-8">
                                        <div className="flex items-center gap-3 mb-3">
                                            <div className={`h-12 w-12 rounded-xl flex items-center justify-center ${plan.popular ? "bg-primary text-primary-foreground" : "bg-primary/10 text-primary"
                                                }`}>
                                                <PlanIcon className="h-6 w-6" />
                                            </div>
                                            <CardTitle className="text-2xl">{plan.name}</CardTitle>
                                        </div>
                                        <CardDescription className="text-base">{plan.description}</CardDescription>
                                        <div className="pt-4">
                                            {plan.price !== null ? (
                                                <>
                                                    <span className="text-4xl font-bold">${plan.price}</span>
                                                    <span className="text-muted-foreground">{plan.period}</span>
                                                </>
                                            ) : (
                                                <span className="text-2xl font-bold">{plan.period}</span>
                                            )}
                                        </div>
                                    </CardHeader>
                                    <CardContent className="flex-1">
                                        <ul className="space-y-3">
                                            {plan.features.map((feature, i) => (
                                                <li key={i} className="flex items-start gap-3">
                                                    <Check className="h-5 w-5 text-primary shrink-0 mt-0.5" />
                                                    <span className="text-muted-foreground">{feature}</span>
                                                </li>
                                            ))}
                                        </ul>
                                    </CardContent>
                                    <CardFooter className="pt-4">
                                        <Link to={plan.ctaLink} className="w-full">
                                            <Button
                                                variant={plan.variant}
                                                size="lg"
                                                className="w-full"
                                            >
                                                {plan.price === null ? (
                                                    <Mail className="h-4 w-4 mr-2" />
                                                ) : (
                                                    <ArrowRight className="h-4 w-4 mr-2" />
                                                )}
                                                {plan.cta}
                                            </Button>
                                        </Link>
                                    </CardFooter>
                                </Card>
                            );
                        })}
                    </div>
                </div>
            </section>

            {/* FAQ Section */}
            <section className="py-16 lg:py-24 bg-background">
                <div className="container mx-auto px-4">
                    <div className="text-center max-w-2xl mx-auto mb-12">
                        <h2 className="text-3xl font-bold text-foreground mb-4">
                            Frequently Asked Questions
                        </h2>
                        <p className="text-muted-foreground">
                            Everything you need to know about our pricing and plans.
                        </p>
                    </div>
                    <div className="max-w-3xl mx-auto">
                        <Accordion type="single" collapsible className="space-y-4">
                            {faqs.map((faq, i) => (
                                <AccordionItem
                                    key={i}
                                    value={`item-${i}`}
                                    className="border rounded-lg px-6"
                                >
                                    <AccordionTrigger className="text-left font-medium hover:no-underline">
                                        {faq.question}
                                    </AccordionTrigger>
                                    <AccordionContent className="text-muted-foreground">
                                        {faq.answer}
                                    </AccordionContent>
                                </AccordionItem>
                            ))}
                        </Accordion>
                    </div>
                </div>
            </section>

            {/* CTA Section */}
            <section className="py-16 bg-primary">
                <div className="container mx-auto px-4 text-center">
                    <h2 className="text-3xl font-bold text-primary-foreground mb-4">
                        Ready to get started?
                    </h2>
                    <p className="text-primary-foreground/80 mb-8 max-w-2xl mx-auto">
                        Join thousands of professionals who trust Accredit for their CPD tracking and certification needs.
                    </p>
                    <div className="flex flex-col sm:flex-row gap-4 justify-center">
                        <Link to="/signup">
                            <Button size="lg" variant="secondary">
                                <ArrowRight className="h-4 w-4 mr-2" />
                                Create Free Account
                            </Button>
                        </Link>
                        <Link to="/contact">
                            <Button size="lg" variant="outline" className="bg-transparent border-primary-foreground text-primary-foreground hover:bg-primary-foreground/10">
                                <Mail className="h-4 w-4 mr-2" />
                                Talk to Sales
                            </Button>
                        </Link>
                    </div>
                </div>
            </section>
        </div>
    );
}
